<!DOCTYPE html>
<html>
	<head>
		<title>AR Poster Demo</title>
		<!-- import aframe and ar.js -->
		<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
		<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

		<style>
			.arjs-loader {
				height: 100%;
				width: 100%;
				position: absolute;
				top: 0;
				left: 0;
				background-color: rgba(0, 0, 0, 0.8);
				z-index: 9999;
				display: flex;
				justify-content: center;
				align-items: center;
			}

			.arjs-loader div {
				text-align: center;
				font-size: 1.25em;
				color: white;
			}
		</style>
	</head>
	<body style="margin: 0; overflow: hidden">
		<div class="arjs-loader">
			<div>Loading, Wait Up Man!...</div>
		</div>

		<!-- AR.js scene -->
		<a-scene vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true;" embedded arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
			<!-- Marker (NFT) -->
			<a-nft type="nft" url="./image-tracking/posterPattern.patt" smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5">
				<a-video src="#myVideo" width="1.5" height="1" position="0 0 0" rotation="0 0 0"></a-video>
			</a-nft>

			<!-- Assets (preload video) -->
			<a-assets>
				<video id="myVideo" src="./video.mp4" preload="auto" loop crossorigin="anonymous" webkit-playsinline playsinline></video>
			</a-assets>

			<!-- Camera -->
			<a-entity camera></a-entity>
		</a-scene>

		<script>
			const scene = document.querySelector("a-scene");
			const video = document.querySelector("#myVideo");

			scene.addEventListener("markerFound", () => {
				video.play();
			});

			scene.addEventListener("markerLost", () => {
				video.pause();
			});
		</script>
	</body>
</html>
